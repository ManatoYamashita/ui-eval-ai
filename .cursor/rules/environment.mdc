---
alwaysApply: false
---

# environment.mdc

## é–‹ç™ºç’°å¢ƒè¨­å®šãƒ«ãƒ¼ãƒ«

### åŸºæœ¬æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Node.js**: v18ä»¥ä¸Šã‚’ä½¿ç”¨
- **Package Manager**: npm ã‚’ä½¿ç”¨ï¼ˆyarnã‚„pnpmã¯é¿ã‘ã‚‹ï¼‰
- **OS**: MacBook Pro (14ã‚¤ãƒ³ãƒ, M3, Nov 2023, OS: 15.5) ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã™ã‚‹

### ç’°å¢ƒå¤‰æ•°ç®¡ç†
- APIã‚­ãƒ¼ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±ã€ãã®ä»–ã®æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã¯**ã™ã¹ã¦ç’°å¢ƒå¤‰æ•°ã‚’é€šã˜ã¦ç®¡ç†**
- æ±ºã—ã¦ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«ç›´æ¥ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã—ãªã„
- `.env.local.example` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æä¾›

### ä¾å­˜é–¢ä¿‚ç®¡ç†
- `package.json` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã¯é©åˆ‡ãªã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’ä½¿ç”¨
- ä¸è¦ãªä¾å­˜é–¢ä¿‚ã¯å®šæœŸçš„ã«å‰Šé™¤
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã¯ `npm audit` ã§å®šæœŸç¢ºèª

## Google Cloud Console APIè¨­å®š

### åŸºæœ¬è¨­å®šæ‰‹é †
1. [Google Cloud Console](https://console.cloud.google.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. æ­£ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
3. **APIs & Services** â†’ **Credentials** ã§ APIã‚­ãƒ¼ã‚’ç®¡ç†

### APIã‚­ãƒ¼è¨­å®šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### é–‹ç™ºç’°å¢ƒã§ã®æ¨å¥¨è¨­å®š
**Application restrictions**: `None` ã‚’é¸æŠ
- é–‹ç™ºæ™‚ã®ã‚¨ãƒ©ãƒ¼ã€ŒAPI_KEY_HTTP_REFERRER_BLOCKEDã€ã‚’å›é¿
- è¨­å®šå¤‰æ›´ã¯5-10åˆ†ç¨‹åº¦ã§åæ˜ 

#### æœ¬ç•ªç’°å¢ƒã§ã®æ¨å¥¨è¨­å®š
**Application restrictions**: `HTTP referrers (web sites)` ã‚’é¸æŠ
```
# æœ¬ç•ªç’°å¢ƒè¨­å®šä¾‹
https://your-domain.vercel.app/*
https://*.vercel.app/*
https://*-your-project.vercel.app/*
```

#### APIåˆ¶é™ã®è¨­å®š
**API restrictions**: `Restrict key` ã‚’é¸æŠ
- `Generative Language API` ã®ã¿æœ‰åŠ¹åŒ–
- å¿…è¦æœ€å°é™ã®APIã®ã¿è¨±å¯

### ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# é–‹ç™ºç’°å¢ƒ
GOOGLE_AI_API_KEY=development_key_with_localhost_restrictions

# æœ¬ç•ªç’°å¢ƒ  
GOOGLE_AI_API_KEY=production_key_with_domain_restrictions
```

## APIè¨­å®šç¢ºèªãƒ»ãƒ†ã‚¹ãƒˆ

### è¨­å®šç¢ºèªæ–¹æ³•
```bash
# APIã‚­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
curl -X POST \
  'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "contents": [{
      "parts": [{"text": "Test message"}]
    }]
  }'
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### API_KEY_HTTP_REFERRER_BLOCKED ã‚¨ãƒ©ãƒ¼
**åŸå› **: Google Cloud Consoleã§APIã‚­ãƒ¼ã«åˆ¶é™ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
**è§£æ±ºç­–**:
1. Google Cloud Console â†’ APIs & Services â†’ Credentials
2. è©²å½“APIã‚­ãƒ¼ã® Application restrictions ã‚’ `None` ã«å¤‰æ›´
3. 5-10åˆ†å¾…æ©Ÿå¾Œã«å†è©¦è¡Œ

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§APIãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ãªã„
**è§£æ±ºç­–**:
1. Google Cloud Console â†’ APIs & Services â†’ Library
2. "Generative Language API" ã‚’æ¤œç´¢
3. "ENABLE" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

### æ­£å¸¸å‹•ä½œæ™‚ã®ãƒ­ã‚°ä¾‹
```
ğŸ–¼ï¸ Starting Gemini image analysis...
ğŸ“ Prompt length: 525
ğŸ–¼ï¸ Image data size: 240476 characters
âœ… Gemini analysis successful
ğŸ” Generating embedding for text: test button text layout...
âœ… Embedding generated successfully
ğŸ“š Found 5 relevant guidelines
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ç›£è¦–

### ä½¿ç”¨é‡ç›£è¦–
- Google Cloud Console â†’ APIs & Services â†’ Quotas ã§ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
- ç•°å¸¸ãªä½¿ç”¨é‡å¢—åŠ ã®æ—©æœŸç™ºè¦‹

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
- APIã‚­ãƒ¼ã®å®šæœŸçš„ãªãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- æœ€å°æ¨©é™ã®åŸå‰‡ã«å¾“ã£ãŸAPIåˆ¶é™
- æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãšãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¶é™ã‚’è¨­å®š

## å‚è€ƒãƒªãƒ³ã‚¯
- [Google AI API Documentation](https://ai.google.dev/docs)
- [API Key Best Practices](https://cloud.google.com/docs/authentication/api-keys)
- [Generative Language API](https://developers.generativeai.google/api)
# environment.mdc

## é–‹ç™ºç’°å¢ƒè¨­å®šãƒ«ãƒ¼ãƒ«

### åŸºæœ¬æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Node.js**: v18ä»¥ä¸Šã‚’ä½¿ç”¨
- **Package Manager**: npm ã‚’ä½¿ç”¨ï¼ˆyarnã‚„pnpmã¯é¿ã‘ã‚‹ï¼‰
- **OS**: MacBook Pro (14ã‚¤ãƒ³ãƒ, M3, Nov 2023, OS: 15.5) ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã™ã‚‹

### ç’°å¢ƒå¤‰æ•°ç®¡ç†
- APIã‚­ãƒ¼ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±ã€ãã®ä»–ã®æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã¯**ã™ã¹ã¦ç’°å¢ƒå¤‰æ•°ã‚’é€šã˜ã¦ç®¡ç†**
- æ±ºã—ã¦ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«ç›´æ¥ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã—ãªã„
- `.env.local.example` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æä¾›

### ä¾å­˜é–¢ä¿‚ç®¡ç†
- `package.json` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã¯é©åˆ‡ãªã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’ä½¿ç”¨
- ä¸è¦ãªä¾å­˜é–¢ä¿‚ã¯å®šæœŸçš„ã«å‰Šé™¤
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã¯ `npm audit` ã§å®šæœŸç¢ºèª

## Google Cloud Console APIè¨­å®š

### åŸºæœ¬è¨­å®šæ‰‹é †
1. [Google Cloud Console](https://console.cloud.google.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. æ­£ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
3. **APIs & Services** â†’ **Credentials** ã§ APIã‚­ãƒ¼ã‚’ç®¡ç†

### APIã‚­ãƒ¼è¨­å®šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### é–‹ç™ºç’°å¢ƒã§ã®æ¨å¥¨è¨­å®š
**Application restrictions**: `None` ã‚’é¸æŠ
- é–‹ç™ºæ™‚ã®ã‚¨ãƒ©ãƒ¼ã€ŒAPI_KEY_HTTP_REFERRER_BLOCKEDã€ã‚’å›é¿
- è¨­å®šå¤‰æ›´ã¯5-10åˆ†ç¨‹åº¦ã§åæ˜ 

#### æœ¬ç•ªç’°å¢ƒã§ã®æ¨å¥¨è¨­å®š
**Application restrictions**: `HTTP referrers (web sites)` ã‚’é¸æŠ
```
# æœ¬ç•ªç’°å¢ƒè¨­å®šä¾‹
https://your-domain.vercel.app/*
https://*.vercel.app/*
https://*-your-project.vercel.app/*
```

#### APIåˆ¶é™ã®è¨­å®š
**API restrictions**: `Restrict key` ã‚’é¸æŠ
- `Generative Language API` ã®ã¿æœ‰åŠ¹åŒ–
- å¿…è¦æœ€å°é™ã®APIã®ã¿è¨±å¯

### ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# é–‹ç™ºç’°å¢ƒ
GOOGLE_AI_API_KEY=development_key_with_localhost_restrictions

# æœ¬ç•ªç’°å¢ƒ  
GOOGLE_AI_API_KEY=production_key_with_domain_restrictions
```

## APIè¨­å®šç¢ºèªãƒ»ãƒ†ã‚¹ãƒˆ

### è¨­å®šç¢ºèªæ–¹æ³•
```bash
# APIã‚­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
curl -X POST \
  'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "contents": [{
      "parts": [{"text": "Test message"}]
    }]
  }'
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### API_KEY_HTTP_REFERRER_BLOCKED ã‚¨ãƒ©ãƒ¼
**åŸå› **: Google Cloud Consoleã§APIã‚­ãƒ¼ã«åˆ¶é™ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
**è§£æ±ºç­–**:
1. Google Cloud Console â†’ APIs & Services â†’ Credentials
2. è©²å½“APIã‚­ãƒ¼ã® Application restrictions ã‚’ `None` ã«å¤‰æ›´
3. 5-10åˆ†å¾…æ©Ÿå¾Œã«å†è©¦è¡Œ

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§APIãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ãªã„
**è§£æ±ºç­–**:
1. Google Cloud Console â†’ APIs & Services â†’ Library
2. "Generative Language API" ã‚’æ¤œç´¢
3. "ENABLE" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

### æ­£å¸¸å‹•ä½œæ™‚ã®ãƒ­ã‚°ä¾‹
```
ğŸ–¼ï¸ Starting Gemini image analysis...
ğŸ“ Prompt length: 525
ğŸ–¼ï¸ Image data size: 240476 characters
âœ… Gemini analysis successful
ğŸ” Generating embedding for text: test button text layout...
âœ… Embedding generated successfully
ğŸ“š Found 5 relevant guidelines
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ç›£è¦–

### ä½¿ç”¨é‡ç›£è¦–
- Google Cloud Console â†’ APIs & Services â†’ Quotas ã§ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
- ç•°å¸¸ãªä½¿ç”¨é‡å¢—åŠ ã®æ—©æœŸç™ºè¦‹

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
- APIã‚­ãƒ¼ã®å®šæœŸçš„ãªãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- æœ€å°æ¨©é™ã®åŸå‰‡ã«å¾“ã£ãŸAPIåˆ¶é™
- æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãšãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¶é™ã‚’è¨­å®š

## å‚è€ƒãƒªãƒ³ã‚¯
- [Google AI API Documentation](https://ai.google.dev/docs)
- [API Key Best Practices](https://cloud.google.com/docs/authentication/api-keys)
- [Generative Language API](https://developers.generativeai.google/api)
